#!/bin/sh

CONFIG_DIR_HOME=(mpd ncmpcpp zsh)
CONFIG_FILE_HOME=(asoundrc gitconfig tmux.conf xinitrc zlogin zprofile zshenv zshrc)
XDG_CONFIG_HOME=(picom fontconfig nvim vifm setxkbmap)

main() {
	git pull --rebase --prune $@
	git submodule update --init --recursive
	git submodule update --remote --merge

	for f in ${CONFIG_FILE_HOME[@]}; do
		if [[ ! -e $HOME/.$f ]]; then
			cp -rv $(pwd -P)/.$f $HOME
		else
			echo "error: failed to install $f: Conflicted with $HOME/.$f"
		fi
	done

	for d in ${CONFIG_DIR_HOME[@]}; do
		if [[ ! -e $HOME/.$d ]]; then
			cp -rv $(pwd -P)/.$d $HOME
		else
			echo "error: failed to install $d: Conflicted with $HOME/.$d"
		fi
	done

	for c in ${XDG_CONFIG_HOME[@]}; do
		if [[ ! -e $HOME/.config/$c ]]; then
			cp -rv $(pwd -P)/.config/$c $HOME/.config
		else
			echo "error: unable to install $c: Conflicted with $HOME/.config/$c"
		fi
	done
}

main "$@"
